@{
    Layout = "";
}
@using Procedure.Web.Models
@using System.Linq
@model GraphVizViewModel

<script src="//d3js.org/d3.v4.min.js"></script>
<script src="https://unpkg.com/viz.js@1.8.0/viz.js" type="javascript/worker"></script>
<script src="https://unpkg.com/d3-graphviz@2.1.0/build/d3-graphviz.min.js"></script>
<div id="graph" style="text-align: center; width: 100%"></div>
<script>
    var i = "@Model.DotString";
    var parser = new DOMParser;
    var dom = parser.parseFromString(
        '<!doctype html><body>' + i,
        'text/html');
    var decodedString = dom.body.textContent;

    d3.select("#graph").graphviz()
        .renderDot(decodedString, function () {
            console.log('Callback');
        })
        .on("end", function () {
            console.log('"end" event');
        });

</script>
