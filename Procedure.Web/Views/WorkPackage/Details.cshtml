@using Procedure.Web.Models
@using System.Linq
@model WorkPackageDetailViewModel

<section>
    <div class="container">
        <div class="block--border">
            <h2>@Model.WorkPackage.Title</h2>
            <dl class="list--definition">
                <dt>Subject to </dt>
                <dd>@Html.ActionLink(Model.WorkPackage.SubjectTo.Value, "Details", "Procedure", new { id = Model.WorkPackage.SubjectTo.Id }, new { })</dd>
            </dl>
            @Html.ActionLink("Show pathway", "Pathway", "WorkPackage", new { id = Model.WorkPackage.Id }, new { @class = "btn--primary" })
        </div>
    </div>
</section>

<section>
    <div class="container">
        <ul class="list--block">
            @foreach (BusinessItem businessItem in Model.BusinessItems.OrderBy(p => p.Id))
            {
                <li>
                    <div class="list--details">
                        <h2>@businessItem.Title</h2>
                        <p>
                            Actualises
                            <ul class="list--details">
                                @foreach (ReferenceTable step in businessItem.Actualises)
                                {
                                    <li>@Html.ActionLink(step.Value, "Details", "Step", new { id = step.Id }, new { })</li>
                                }
                            </ul>
                        </p>
                    </div>
                </li>
            }
        </ul>
    </div>
</section>